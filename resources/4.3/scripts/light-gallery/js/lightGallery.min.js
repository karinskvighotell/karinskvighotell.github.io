(function(d){d.fn.lightGallery=function(F){var G={mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:600,addClass:"",closable:!0,loop:!1,auto:!1,pause:4E3,playable:!0,escKey:!0,controls:!0,hideControlOnEnd:!1,preload:1,showAfterLoad:!0,selector:null,index:!1,lang:{allPhotos:"All photos",comments:"comments"},counter:!1,exThumbImage:!1,thumbnail:!0,showThumbByDefault:!1,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbMargin:5,mobileSrc:!1,mobileSrcMaxWidth:640,swipeThreshold:50,
enableTouch:!0,enableDrag:!0,vimeoColor:"CCCCCC",youtubePlayerParams:!1,videoAutoplay:!0,videoMaxWidth:"855px",showHideCtrls:!0,comments:!0,commentForm:d("#ds-comment-form"),dynamic:!1,dynamicEl:[],onOpen:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onBeforeClose:function(){},onCloseAfter:function(){},onLoaded:function(){}},B=d(this),m=this,k=null,h=0,x=!1,n=!1,H=document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in
window||navigator.msMaxTouchPoints,j,C,l,f,o,t,D,p,q,E,r,w=!1,y=!1,z=!1,u=!1,v,s=!0,a=d.extend(!0,{},G,F),A={init:function(){x=!0;this.structure();this.getWidth();this.closeSlide();this.comments();this.counter();this.slideTo();this.buildThumbnail();this.keyPress();this.autoStart();a.index?(this.slide(a.index),this.animateThumb(a.index)):(this.slide(h),this.animateThumb(h));a.enableDrag&&this.touch();a.enableTouch&&this.enableTouch();setTimeout(function(){j.addClass("opacity")},50)},structure:function(){d("body").append('<div id="lg-outer" class="'+
a.addClass+'"><div id="lg-gallery"><div id="lg-slider"></div><a id="lg-close" class="close"></a></div></div>').addClass("light-gallery");C=d("#lg-outer");j=d("#lg-gallery");a.showAfterLoad===!0&&j.addClass("show-after-load");l=j.find("#lg-slider");var b="";if(a.dynamic)for(var c=0;c<a.dynamicEl.length;c++)b+='<div class="lg-slide"></div>';else k.each(function(){b+='<div class="lg-slide"></div>'});l.append(b);f=j.find(".lg-slide");a.comments&&j.append(d('<a id="lg-comment"><span class="comment-text" title=" '+
a.lang.comments+' ">(<span class="count">0</span>)</span></a>'))},closeSlide:function(){if(a.closable)d("#lg-outer").on("click",function(b){d(b.target).is(".lg-slide")&&m.destroy(!1)});d("#lg-close").bind("click touchend",function(b){b.stopPropagation();m.destroy(!1)})},comments:function(){if(a.comments){var b=d("#lg-comment");b.on("mouseup touchend",function(a){a.preventDefault();a.stopPropagation();u?(v.hide(),f.eq(h).find(".lg-comment-list").hide(),u=!1,b.removeClass("active")):(v.show(),f.eq(h).find(".lg-comment-list").show(),
u=!0,b.addClass("active"))})}},getWidth:function(){d(window).bind("resize.lightGallery",function(){E=d(window).width()}())},doCss:function(){var b;return a.useCSS&&function(){for(var a="transition,MozTransition,WebkitTransition,OTransition,msTransition,KhtmlTransition".split(","),b=document.documentElement,g=0;g<a.length;g++)if(a[g]in b.style)return!0}()?!0:!1},enableTouch:function(){var b=this;if(H){var c,i={};d("body").on("touchstart.lightGallery",function(a){i=a.originalEvent.targetTouches[0];
c=a.originalEvent.targetTouches[0].pageX});d("body").on("touchmove.lightGallery",function(a){i=a.originalEvent.targetTouches[0];a.preventDefault()});d("body").on("touchend.lightGallery",function(){var d=i.pageX-c,e=a.swipeThreshold;d>=e?(b.prevSlide(),b.pause()):d<=-e&&(b.nextSlide(),b.pause())})}},touch:function(){var a,c,i=this;d(".light-gallery").bind("mousedown",function(c){c.stopPropagation();c.preventDefault();a=c.pageX});d(".light-gallery").bind("mouseup",function(g){c=g.pageX;if(c-a>20)i.prevSlide();
else if(a-c>20)i.nextSlide();else{var e=d(g.target);if(e.is(".lg-caption a")||e.parents(".lg-caption a").length>0)return;else e.is(".lg-caption")||e.parents(".lg-caption").length>0?i.setCaptionSize():e.is(".thumb-cont")||e.parents(".thumb-cont").length>0||e.is("#lg-action")||e.parents("#lg-action").length>0||e.is("#lg-close")||e.parents("#lg-close").length>0||e.is(".AlertPanel")||e.parents(".AlertPanel").length>0||i.showHideCtrls(e)}g.stopPropagation();g.preventDefault()})},isVideo:function(b,c){var d=
b.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),g=b.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),e=!1;a.dynamic?a.dynamicEl[c].iframe=="true"&&(e=!0):k.eq(c).attr("data-iframe")=="true"&&(e=!0);if(d||g||e)return!0},loadVideo:function(b,c){var i=b.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),g=b.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),e="",e="";i?(e=a.videoAutoplay===!0&&n===!1?"?autoplay=1&rel=0&wmode=opaque":
"?wmode=opaque",a.youtubePlayerParams&&(g=d.param(a.youtubePlayerParams),e=e+"&"+g),e='<iframe class="object" width="560" height="315" src="//www.youtube.com/embed/'+i[1]+e+'" frameborder="0" allowfullscreen></iframe>'):g?(e=a.videoAutoplay===!0&&n===!1?"autoplay=1&amp;":"",e='<iframe class="object" id="video'+c+'" width="560" height="315"  src="http://player.vimeo.com/video/'+g[1]+"?"+e+"byline=0&amp;portrait=0&amp;color="+a.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):
e='<iframe class="object" frameborder="0" src="'+b+'"  allowfullscreen="true"></iframe>';return'<div class="video-cont" style="max-width:'+a.videoMaxWidth+' !important;"><div class="video">'+e+"</div></div>"},getHtmlElem:function(b){var c=null,c=a.dynamic?a.dynamicEl[b]["sub-html"]:k.eq(b).attr("data-sub-html");return typeof c!=="undefined"&&c!==null?d(c).size()>0?c:null:null},addHtml:function(b){var c=this.getHtmlElem(b),i;c?i=d(c).html():a.dynamic&&(i=a.dynamicEl[b]["sub-html"]);i&&f.eq(b).append('<div class="lg-caption">'+
i+"</div>")},addComments:function(b){var c=null,c=a.dynamic?a.dynamicEl[b]["comments-html"]:k.eq(b).attr("data-comments-html");if(typeof c!=="undefined"&&c!==null){var i=d(c);i.size()>0&&(i=i.attr("id"),c=d(c).html(),c=d('<div class="lg-comment-list" style="display:none;">'+c+"</div>"),f.eq(b).append(c),i&&c.attr("id","_"+i),c.find("div.CommentContainer").each(function(){var a=d(this),b=a.attr("id");b!=void 0&&b.length>0&&a.attr("id","_"+b)}))}},preload:function(b){for(var c=0;c<=a.preload;c++){if(c>=
k.length-b)break;this.loadContent(b+c,!0)}for(c=0;c<=a.preload;c++){if(b-c<0)break;this.loadContent(b-c,!0)}},loadObj:function(a,c,d){var g=this;f.eq(c).find(".object").on("load error",function(){f.eq(c).addClass("complete");var a=f.eq(c).find("img");s?a.siblings("div.lg-caption").show():a.siblings("div.lg-caption").hide();d&&d()});if(a===!1)if(f.eq(c).hasClass("complete"))g.preload(c);else f.eq(c).find(".object").on("load error",function(){g.preload(c)})},loadContent:function(b,c,i){var g=this,e;
if(a.preload>k.length)a.preload=k.length;a.mobileSrc===!0&&E<=a.mobileSrcMaxWidth&&(e=a.dynamic?a.dynamicEl[b].mobileSrc:k.eq(b).attr("data-responsive-src"));e||(e=a.dynamic?a.dynamicEl[b].src:k.eq(b).attr("data-src"));var h=0;c===!0&&(h=a.speed+400);typeof e!=="undefined"&&e!==""?g.isVideo(e,b)?setTimeout(function(){f.eq(b).hasClass("loaded")||(f.eq(b).prepend(g.loadVideo(e,b)),g.addHtml(b),f.eq(b).addClass("loaded"),a.auto&&a.videoAutoplay===!0&&g.pause());g.loadObj(c,b,i)},h):setTimeout(function(){f.eq(b).hasClass("loaded")||
(f.eq(b).prepend('<img class="object" src="'+e+'" />'),g.addHtml(b),a.comments&&g.addComments(b),f.eq(b).addClass("loaded"));g.loadObj(c,b,i)},h):setTimeout(function(){if(!f.eq(b).hasClass("loaded")){var e=null,e=a.dynamic?a.dynamicEl[b].html:k.eq(b).attr("data-html");if(typeof e!=="undefined"&&e!==null){var i=e.substring(0,1);if(i=="."||i=="#")e=d(e).html()}typeof e!=="undefined"&&e!==null&&f.eq(b).append('<div class="video-cont" style="max-width:'+a.videoMaxWidth+' !important;"><div class="video">'+
e+"</div></div>");g.addHtml(b);a.comments&&g.addComments(b);f.eq(b).addClass("loaded complete");a.auto&&a.videoAutoplay===!0&&clearInterval(r)}g.loadObj(c,b)},h)},showHideCtrls:function(){var a=f.eq(h).find("div.lg-caption"),c=d("#lg-slider").siblings(":not(#lg-comment-form)");s?(a.hide(),c.hide(),s=!1):(a.show(),c.show(),s=!0)},setCaptionSize:function(){f.eq(h).find("div.lg-caption").toggleClass("expanded")},counter:function(){if(a.counter===!0){var b=d("#lg-slider > div").length;j.append("<div id='lg-counter'><span id='lg-counter-current'></span> / <span id='lg-counter-all'>"+
b+"</span></div>")}},buildThumbnail:function(){if(a.thumbnail===!0&&k.length>1){var b=this,c="";a.showThumbByDefault||(c='<span class="close ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span>');j.append('<div class="thumb-cont"><div class="thumb-info">'+c+'</div><div class="thumb-inner"></div></div>');j.find(".thumb-cont");o.after('<a class="cl-thumb"></a>');o.parent().addClass("has-thumb");j.find(".cl-thumb").bind("click touchend",function(){j.addClass("open");b.doCss()&&a.mode==="slide"&&
(f.eq(h).prevAll().removeClass("next-slide").addClass("prev-slide"),f.eq(h).nextAll().removeClass("prev-slide").addClass("next-slide"))});j.find(".thumb-cont .close").bind("click touchend",function(){j.removeClass("open")});var c=j.find(".thumb-info"),i=j.find(".thumb-inner"),g="",e;if(a.dynamic)for(var l=0;l<a.dynamicEl.length;l++)e=a.dynamicEl[l].thumb,g+='<div class="thumb"><img src="'+e+'" /></div>';else k.each(function(){e=a.exThumbImage===!1||typeof d(this).attr(a.exThumbImage)=="undefined"||
d(this).attr(a.exThumbImage)===null?d(this).find("img").attr("src"):d(this).attr(a.exThumbImage);g+='<div class="thumb"><img src="'+e+'" /></div>'});i.append(g);q=i.find(".thumb");q.css({"margin-right":a.thumbMargin+"px",width:a.thumbWidth+"px"});a.animateThumb===!0&&(i=k.length*(a.thumbWidth+a.thumbMargin),j.find(".thumb-inner").css({width:i+"px",position:"relative","transition-duration":a.speed+"ms"}));q.bind("click touchend",function(){w=!0;var a=d(this).index();q.removeClass("active");d(this).addClass("active");
b.slide(a);b.animateThumb(a);b.pause()});c.prepend('<span class="ib count">'+a.lang.allPhotos+" ("+q.length+")</span>");a.showThumbByDefault&&j.addClass("open")}},animateThumb:function(b){if(a.animateThumb===!0){var c=j.find(".thumb-cont").width(),d;switch(a.currentPagerPosition){case "left":d=0;break;case "middle":d=c/2-a.thumbWidth/2;break;case "right":d=c-a.thumbWidth}b=(a.thumbWidth+a.thumbMargin)*b-1-d;d=k.length*(a.thumbWidth+a.thumbMargin);b>d-c&&(b=d-c);b<0&&(b=0);this.doCss()?j.find(".thumb-inner").css("transform",
"translate3d(-"+b+"px, 0px, 0px)"):j.find(".thumb-inner").animate({left:-b+"px"},a.speed)}},slideTo:function(){var b=this;a.controls===!0&&k.length>1&&(j.append('<div id="lg-action"><a id="lg-prev"></a>'+(a.playable?'<a id="lg-play-pause"></a>':"")+'<a id="lg-next"></a></div>'),o=j.find("#lg-prev"),t=j.find("#lg-next"),D=j.find("#lg-play-pause"),o.bind("mouseup",function(a){a.preventDefault();a.stopPropagation();b.prevSlide();b.pause()}),t.bind("mouseup",function(a){a.preventDefault();a.stopPropagation();
b.nextSlide();b.pause()}),D.bind("mouseup",function(a){a.preventDefault();a.stopPropagation();r?b.pause():b.play()}))},autoStart:function(){a.auto===!0&&this.play()},play:function(){var b=this;clearInterval(r);r=setInterval(function(){h+1<k.length||(h=-1);h++;b.slide(h)},a.pause);d("#lg-play-pause").addClass("playing")},pause:function(){clearInterval(r);r=null;d("#lg-play-pause").removeClass("playing")},keyPress:function(){var b=this;d(window).bind("keyup.lightGallery",function(c){c.preventDefault();
c.stopPropagation();c.keyCode===37&&(b.prevSlide(),b.pause());c.keyCode===38&&a.thumbnail===!0&&k.length>1?j.hasClass("open")||(b.doCss()&&a.mode==="slide"&&(f.eq(h).prevAll().removeClass("next-slide").addClass("prev-slide"),f.eq(h).nextAll().removeClass("prev-slide").addClass("next-slide")),j.addClass("open")):c.keyCode===39&&(b.nextSlide(),b.pause());c.keyCode===40&&a.thumbnail===!0&&k.length>1&&!a.showThumbByDefault?j.hasClass("open")&&j.removeClass("open"):a.escKey===!0&&c.keyCode===27&&(!a.showThumbByDefault&&
j.hasClass("open")?j.removeClass("open"):m.destroy(!1))})},nextSlide:function(){this.pause();h=f.index(f.eq(p));h+1<k.length?(h++,this.slide(h)):a.loop?(h=0,this.slide(h)):a.thumbnail===!0&&k.length>1&&!a.showThumbByDefault?j.addClass("open"):(f.eq(h).find(".object").addClass("right-end"),setTimeout(function(){f.find(".object").removeClass("right-end")},400));this.animateThumb(h);a.onSlideNext.call(this,m)},prevSlide:function(){this.pause();h=f.index(f.eq(p));h>0?(h--,this.slide(h)):a.loop?(h=k.length-
1,this.slide(h)):a.thumbnail===!0&&k.length>1&&!a.showThumbByDefault?j.addClass("open"):(f.eq(h).find(".object").addClass("left-end"),setTimeout(function(){f.find(".object").removeClass("left-end")},400));this.animateThumb(h);a.onSlidePrev.call(this,m)},slide:function(b){var c=this;n?(setTimeout(function(){c.loadContent(b,!1)},a.speed+400),l.hasClass("on")||l.addClass("on"),this.doCss()&&a.speed!==""&&(l.hasClass("speed")||l.addClass("speed"),z===!1&&(l.css("transition-duration",a.speed+"ms"),z=!0)),
this.doCss()&&a.cssEasing!==""&&(l.hasClass("timing")||l.addClass("timing"),y===!1&&(l.css("transition-timing-function",a.cssEasing),y=!0)),a.onSlideBefore.call(this,m)):c.loadContent(b,!1,function(){B.trigger("firstload")});if(a.mode==="slide"){var i=navigator.userAgent.match(/iPad/i)!==null;this.doCss()&&!l.hasClass("slide")&&!i?l.addClass("slide"):this.doCss()&&!l.hasClass("use-left")&&i&&l.addClass("use-left");!this.doCss()&&!n?l.css({left:-b*100+"%"}):!this.doCss()&&n&&l.animate({left:-b*100+
"%"},a.speed,a.easing)}else a.mode==="fade"&&(this.doCss()&&!l.hasClass("fade-m")?l.addClass("fade-m"):!this.doCss()&&!l.hasClass("animate")&&l.addClass("animate"),!this.doCss()&&!n?(f.fadeOut(100),f.eq(b).fadeIn(100)):!this.doCss()&&n&&(f.eq(p).fadeOut(a.speed,a.easing),f.eq(b).fadeIn(a.speed,a.easing)));b+1>=k.length&&a.auto&&a.loop===!1&&c.pause();f.eq(p).removeClass("current");f.eq(b).addClass("current");this.doCss()&&a.mode==="slide"&&(w===!1?(d(".prev-slide").removeClass("prev-slide"),d(".next-slide").removeClass("next-slide"),
f.eq(b-1).addClass("prev-slide"),f.eq(b+1).addClass("next-slide")):(f.eq(b).prevAll().removeClass("next-slide").addClass("prev-slide"),f.eq(b).nextAll().removeClass("prev-slide").addClass("next-slide")));a.thumbnail===!0&&k.length>1&&(q.removeClass("active"),q.eq(b).addClass("active"));if(a.controls&&a.hideControlOnEnd&&a.loop===!1&&k.length>1)i=k.length,i=parseInt(i)-1,b===0?(o.addClass("disabled"),t.removeClass("disabled")):b===i?(o.removeClass("disabled"),t.addClass("disabled")):o.add(t).removeClass("disabled");
p=b;n===!1?(a.onOpen.call(this,m),a.comments&&a.commentForm.length>0&&(u=!1,v=a.commentForm.clone().attr("id","lg-comment-form").addClass("floating-comment-form"),l.after(v),v.on("mouseup",function(a){a.stopPropagation()}).on("mousedown",function(a){a.stopPropagation()})),s=!0):a.onSlideAfter.call(this,m);var g=f.eq(b);s?g.find("div.lg-caption").show():g.find("div.lg-caption").hide();u?g.find("div.lg-comment-list").show():g.find("div.lg-comment-list").hide();setTimeout(function(){n=!0;if(a.comments){var b=
g.find("div.lg-comment-list div.CommentContainer").size();d("#lg-comment span.count").text(b)}},a.speed-100);w=!1;a.counter&&d("#lg-counter-current").text(b+1);d(window).bind("resize.lightGallery",function(){setTimeout(function(){c.animateThumb(b)},200)})}};m.isActive=function(){return x===!0?!0:!1};m.destroy=function(b){x=!1;b=typeof b!=="undefined"?!1:!0;a.onBeforeClose.call(this,m);var c=n;w=z=y=n=!1;clearInterval(r);b===!0&&k.off("click touch touchstart");d(".light-gallery").off("mousedown mouseup");
d("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery");d(window).off("resize.lightGallery keyup.lightGallery");c===!0&&(j.addClass("fade-m"),setTimeout(function(){C.remove();d("body").removeClass("light-gallery")},500));a.onCloseAfter.call(this,m)};(function(){B.each(function(){var b=d(this);a.dynamic?(k=a.dynamicEl,p=h=0,A.init(h)):(k=a.selector!==null?d(a.selector).has("img"):b.children(),k.on("click",function(c){k=a.selector!==null?d(a.selector).has("img"):b.children();
h=k.index(this);var f=d(c.target),g=A.getHtmlElem(h);f.is(g+" a")||(c.preventDefault(),c.stopPropagation(),p=h,A.init(h))}))})})();return this}})(jQuery);
